<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
    <mapper namespace="com.sd.mommyson.user.dao.UserDAO">
    
    <resultMap type="com.sd.mommyson.manager.dto.PostDTO" id="postResultMap">
    	<id property="postNo" column="POST_NO"/>
    	<result property="boardCode" column="BOARD_CODE"/>
    	<result property="postTitle" column="POST_TITLE"/>
    	<result property="memCode" column="MEM_CODE"/>
    	<result property="postContent" column="POST_CONTENT"/>
    	<result property="postDate" column="POST_DATE"/>
    	<result property="ansStatus" column="ANS_STATUS"/>
    	<result property="QuestionNo" column="QUE_NO"/>
    	<result property="Status" column="STATUS"/>
    </resultMap>
    
    <!-- 연습 -->
    <select id="selectNotice" resultMap="postResultMap">
    	SELECT
    	       A.POST_NO
			 , A.BOARD_CODE
			 , A.POST_TITLE
			 , A.MEM_CODE
			 , A.POST_CONTENT
			 , A.POST_DATE
			 , A.ANS_STATUS
			 , A.QUE_NO
			 , A.STATUS				
		FROM (SELECT
				   B.POST_NO
				 , B.BOARD_CODE
				 , B.POST_TITLE
				 , B.MEM_CODE
				 , B.POST_CONTENT
				 , B.POST_DATE
				 , B.ANS_STATUS
				 , B.QUE_NO
				 , B.STATUS	
			  FROM (SELECT
						   C.POST_NO
						 , C.BOARD_CODE
						 , C.POST_TITLE
						 , C.MEM_CODE
						 , C.POST_CONTENT
						 , C.POST_DATE
						 , C.ANS_STATUS
						 , C.QUE_NO
						 , C.STATUS	
					  FROM POST_TBL C 
					  )B
					  
					  )A
		 	
    
    </select>
    
    <!-- 공지사항 페이지네이션 페이지수  -->
    <select id="selectTotalCount" resultType="_int" parameterType="hashmap">
        SELECT
               COUNT(*)
          FROM POST_TBL A
	      JOIN BOARD_TBL B ON(A.BOARD_CODE = B.BOARD_CODE)
    	<where>
    		<if test="searchCondition != null">
				B.D_TYPE = #{ searchCondition }
    		</if>
			<if test="searchValue != null">
	        	A.POST_TITLE LIKE '%' || #{ searchValue } || '%' 	
			</if>
			A.STATUS = 'N'
    	</where>
	</select>
	
	<!-- 공지사항 출력 및 검색 -->

	
	
    
    </mapper>